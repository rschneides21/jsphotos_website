{% load staticfiles %}

<!DOCTYPE html>
<html class="bigpic" lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Image of the Day</title>

    <!-- Bootstrap -->
    <link href= "{% static "css/bootstrap.min.css" %}" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
    body {
      margin-top: 50px;
      margin-bottom: 50px;
      background: none;
    }
    </style>
  
  </head>

  <body>
    <div id = "image1"></div>
    <table id="image_table">
    </table> 
    {% block javascript%}
    <script> 
    // from https://groups.google.com/forum/#!topic/django-users/PI7F3_U4eC4
    var img_urls = [{% for image in images %}"{{ image.img.url }}"{% if not forloop.last %},{% endif %}{% endfor %}];

    var array_length = img_urls.length
    for (i = 0; i < array_length; i++){
      img_urls[i].height *= .25
      img_urls[i].width *= .25
        // start new row
        if (i % 4 == 0){
           document.getElementById("image_table").innerHTML += "<tr>"
        }

        document.getElementById("image_table").innerHTML += "<td><img src=" + img_urls[i] + "></td>"

        // end current row when full
        if (i % 4 == 1){
          console.log("test");
          document.getElementById("image_table").innerHTML += "</tr>"
        }  
    }
    // if table doesn't end with a full row, end table row
    if (array_length % 4 != 1){
      document.getElementById("image_table".)innerHTML += "</tr>"
    }
    //document.getElementById(image_table).innerHTML = 
    //document.getElementById("image1").innerHTML = "<img src = " + img_urls[1] + ">"

    </script>
    {% endblock %}

    <!--{% block content %}
    <img src = "{{image.img.url}}">
    {% endblock %}
    -->
    <script src="{% static "js/jquery-1.11.0.min.js" %}"></script>
    <script src="{% static "js/bootstrap.min.js" %}"></script>
  </body>
</html>
