{% extends "base.html" %}

{% block extra_css %}
  <style>
    td.lighten {
    background: white;
  }

  td.lighten img {
    -webkit-transition: all 0.2s linear;
       -moz-transition: all 0.2s linear;
        -ms-transition: all 0.2s linear;
         -o-transition: all 0.2s linear;
            transition: all 0.2s linear;
  }

  td.lighten:hover img{
    opacity : 0.7;
  }

  td.lighten:hover .img-description{
    visibility: visible;
      opacity: 1;
  }

  td {
    border-right: 5px solid transparent;
      -webkit-background-clip: padding;
         -moz-background-clip: padding;
          -ms-background-clip: padding;
           -o-background-clip: padding-box;
              background-clip: padding-box;
  }
  </style>
{% endblock %}
{% block additions %}
    <table id = "image_table" style="max-width:80%" align = "center" cellpadding="0" cellspacing="0">
    </table> 

    <script> 
    // from https://groups.google.com/forum/#!topic/django-users/PI7F3_U4eC4
    var img_urls = [{% for image in images %}"{{ image.img.url }}"{% if not forloop.last %},{% endif %}{% endfor %}];

    var array_length = img_urls.length
    var table = document.getElementById("image_table");
    var row_num = 0;
    for (i = 0; i < array_length; i++){
        // start new row
        if (i % 3 == 0){
           var row = table.insertRow(row_num++)
        }
        var cell = row.insertCell(0);
        cell.innerHTML += "<form action ='{% url 'image' {{ image.img.id}} %}' method = post> <img src= " + img_urls[i] + " width = '500' height = '303' style= 'max-width:100%; height:auto;'>"
    }
    <form action = '{% url 'gallery:image' image.img.id %}' >
    //document.getElementById(image_table).innerHTML = 
    //document.getElementById("image1").innerHTML = "<img src = " + img_urls[1] + ">"

    </script>
  {% endblock %}

    <!--{% block content %}
    <img src = "{{image.img.url}}">
    {% endblock %}
    -->
